def expand_universe(universe):
    galaxies = []
    rows, cols = len(universe), len(universe[0])

    # Identify galaxies locations
    for i in range(rows):
        for j in range(cols):
            if universe[i][j] == "#":
                galaxies.append((i, j))

    # Expand the universe by doubling rows and columns without galaxies
    expanded_rows = []
    for i in range(rows):
        if i not in [galaxy[0] for galaxy in galaxies]:
            expanded_rows.append(i)

    expanded_cols = []
    for j in range(cols):
        if j not in [galaxy[1] for galaxy in galaxies]:
            expanded_cols.append(j)

    return galaxies, expanded_rows, expanded_cols


def sum_of_shortest_paths(universe):
    galaxies, rows, cols = expand_universe(universe)
    paths_sum = 0

    # Calculate the sum of shortest paths for each pair of galaxies
    for i in range(len(galaxies)):
        for j in range(i + 1, len(galaxies)):
            paths_sum += (
                abs(galaxies[i][0] - galaxies[j][0])
                + abs(galaxies[i][1] - galaxies[j][1])
                + len(
                    list(
                        filter(
                            lambda x: min(galaxies[i][0], galaxies[j][0])
                            < x
                            < max(galaxies[i][0], galaxies[j][0]),
                            rows,
                        )
                    )
                )
                * 999999
                + len(
                    list(
                        filter(
                            lambda x: min(galaxies[i][1], galaxies[j][1])
                            < x
                            < max(galaxies[i][1], galaxies[j][1]),
                            cols,
                        )
                    )
                )
                * 999999
            )

    return paths_sum


universe = """.......................................................................................#....................................................
............................#................#..............................................................................................
....#...............................#.............................................................#........#.......#........................
................#.....#...........................#..........#...............................#................................#............#
..........................................#.................................................................................................
..........#............................................#......................#........................................#..............#.....
............................................................................................................................................
..............................#.......................................#............#...............#......#.......#.........................
.................................................................#.........................#................................................
....................#..............#.....#..................................................................................................
..............#............#................................................................................................#.....#......#..
............................................................#...........................#...................................................
..#.........................................#......#......................#.................................................................
...............................................................................................#......................................#.....
............#............................................#.......................................................#..........................
.................#.....................................................................................#....................................
...............................#..................................................#.........#......................................#........
...............................................................#.................................#..........................................
..............#...................................#.......................#................................#........#.......................
.......................................................................................#....................................#..............#
.#........................#...................#................................................................#............................
....................................#......................................................#.........................................#......
...........#......................................................................#................#........................................
....................................................#....................#....................................................#.............
.....................#............................................#......................................#.........#........................
................#...........................................................................................................................
#.........................................#......................................................#................................#.........
............#.......................#........................................#........................#.....................................
......#..................................................................................#................................#.................
...........................................................................................................#........#.......................
.......................................................#.....................................#..............................................
.........#........................#............#...........................#.........#..............................................#.......
.....................................................................................................#......................................
....................#................................................#.........................................................#............
.........................................#.............................................................................#................#...
...........................#....................................#...........................................................................
.......#.......................................................................#.................#........#.......#.........................
......................................................................................#.....................................................
#......................................#..............................#..............................#......................................
.............#......#...........#...........................................................................................................
.....................................................#....................................#...................#..................#..........
..........................#......................................#........................................................#.................
..............................................................................#.............................................................
...................................#............................................................#........#..................................
....#..........#..........................................#..........#....................................................................#.
.................................................................................................................#..........................
...........................#.........................................................#......................................................
.........................................#...................#..............................................................................
........#............................................#........................................#...........#................#................
.............................................#.....................................................#.................#...............#......
............#.................#......#.............................#..........#................................................#............
...........................................................................................................................................#
.........................#.........................#........................................................................................
............................................................#...............................................................................
.........#................................#........................................#.............#.....................................#....
.................#..........#............................................................#......................#...........................
..........................................................................................................#...........#.....................
..........................................................................#..................#............................................#.
......#.........................................................#...........................................................................
....................................................................................................#.....................#.................
...........#......................................#.................#.........#.............................#..................#............
............................#...............................................................................................................
....................#..................................................................#.............................#......................
..........................................#.......................................#.............................#........................#..
#.......#.....#................#.........................#................#..............................#..................................
............................................................................................................................................
.....................................#........................#......................#........#.............................................
.....#......................................#................................#..............................................#.......#.......
............................................................................................................................................
.................#......#........................................#..............................................#......#................#...
................................#.........................................#.................................................................
..........#..........................................................#...........#...............#..........................................
.......................................#.................#................................#..................#..............................
............................................................................................................................................
............................................................................................................................................
.#..................................#............................................................................................#..........
.............#.......#.......................................................#..............................................................
...................................................#.................................#.............#.......#...........................#....
............................................................................................................................................
......#....................#......#............................#....................................................#......#................
...............#..............................#......................#.............................................................#........
........................................#...................................................................................................
.........#..............................................................................................................................#...
.........................#......................................................#.........#..........#......................................
.............................................................#..............................................................#...............
....................................................#....................#..................................................................
#.............#.......................#................................................................................#........#...........
.....#...........................................................#......................................#.....#.............................
..........#.........#........#............................#......................................#..................................#.......
......................................................................................#......................................#..............
...............................................#.....#......................................................................................
................#.........................#....................#.......#.....#...........................................................#..
........................#........................................................................................................#..........
.#...................................#..........................................................#..........#................................
.....................................................................................................................#......................
...........................#..............................................................#.................................................
......#...............#.................................................................................................................#...
....................................................#.....#.............#.....................#.............................................
.......................................#........................................#..................#.............................#..........
............................................................................................................................................
..................#...............#...........#......................................................................................#......
.....................................................................#...............#.....................#..........#.......#.............
..................................................#..............................................#..........................................
..........................#...........#.....................................................................................................
...........................................................................................................................................#
.........................................................#...............#......................................#...........................
........#...........#...........................................#............................................................#..............
..............#.......................................................................#...........................................#.........
....................................................#.......................................................#...............................
................................#..............#........................................................................#...................
.........................................#.......................................................#..........................................
..........................................................#......#...........#...........#............#..............................#......
..........................#........#..............................................................................#...........#.............
...................................................#.......................................................#................................
.........#..............................................................................................................................#...
....................#........#..............................#...............................................................................
......................................................................#.........................#...........................................
......................................................#.......................#..........#...............#..............#...................
...#......................................#.................................................................................................
................#.................................#.........................................................................................
......................#.............#...........................................................................#..........#.........#......
.......#....................................................#............#..................................................................
...................................................................................#........................................................
............................................................................................#......................#........................
...........#...................#.........................#..........................................#......#................................
................#...................................#...........................#.....#.......................................#...........#.
.....................#..................................................#............................................................#......
...............................................................................................#............................................
.#.........................................#.......................#........................................................................
...................................#.........................#..............................................................................
.............................#..............................................................................................................
.................#....................................#....................................#...................#......#.....................
..........................................................................................................................................#.
........#......................................#..................#..........................................................#..............
..............#....................................................................#........................................................
.....................#......................................................................................................................
......................................#...................................................#.................................................
..#...............................................................................................................#.........................
..........................#...................#......#....................#...................#.............................#.....#......#..
......#.........#.................#..............................#..................#...............#........#..............................""".split(
    "\n"
)

result = sum_of_shortest_paths(universe)
print("Sum of shortest paths:", result)
